<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/normalize.css">
    <link rel="stylesheet" href="./css/skeleton.css">
    <link rel="stylesheet" href="./css/style.css">
    <link rel="icon" type="image/x-icon" href="./assets/favicon.ico">
    <title>OnlyFarms</title>
</head>
<body>

  <header>

        <div id="headerContainer">
            <a href="/" id="siteHomeLink"><img src="./assets/onlyfarms-logo.svg" id="sitelogo"></a>
            <nav>
                <a href="/login">Sign up</a>
                <!-- {{#if loggedIn}} -->
                <!-- <button id="logout">Logout</button> -->
                <!-- {{else}} -->
                <a href="/login">Login</a>
                <!-- {{/if}} -->
            </nav>
        </div>

  </header>

  <main>
    <div class="container withGutter">
        <aside class="three columns">
            <button class="button" id="addFarmBtn">Add New Farm</button>
            <ul>
                <li>
                    <a href="#">Farm 1</a>
                </li>
                <li>
                    <a href="#">Farm 2</a>
                </li>
                <li>
                    <a href="#">Farm 3</a>
                </li>
                <li>
                    <a href="#">Farm 4</a>
                </li>
            </ul>
        </aside>
        <div class="nine columns">
        <div class="twelve columns" id="farmInfo">
            <h1>Luke's Farm</h1>
            <p>At Luke's Farm, we do everything right. Don't like GMOs? We got your organic stuff. Love GMOs? We got engineered stuff. There's always something for everybody at Luke's Farm.</p>
        </div>

        <div class="twelve columns" id="chartContainer">
            <canvas id="notAnimal" aria-label="Budget chart for each animal" role="img"></canvas>
        </div>
        <div id="animalHeader" class="twelve columns">
            <h2>Animals</h2><button id="addAnimalBtn" class="button-primary">Add animal</button>
        </div>
        
        <div class="twelve columns" id="animalContainer">
        <a href="#" class="four columns animalLink">
            <div class="blue animal">
                <img src="./assets/animals/lambchop.png" class="u-pull-left">
                <ul>
                    <li>
                        <strong>Name:</strong> Lambchop
                    </li>
                    <li>
                        <strong>Type:</strong> Sheep
                    </li>
                </ul>
            </div>
        </a>
        <a href="#" class="four columns animalLink">
            <div class="blue animal">
                <img src="./assets/animals/lambchop.png" class="u-pull-left">
                <ul>
                    <li>
                        <strong>Name:</strong> Lambchop
                    </li>
                    <li>
                        <strong>Type:</strong> Sheep
                    </li>
                </ul>
            </div>
        </a>
        <a href="#" class="four columns animalLink">
            <div class="blue animal">
                <img src="./assets/animals/lambchop.png" class="u-pull-left">
                <ul>
                    <li>
                        <strong>Name:</strong> Lambchop
                    </li>
                    <li>
                        <strong>Type:</strong> Sheep
                    </li>
                </ul>
            </div>
        </a>

        <a href="#" class="four columns animalLink">
            <div class="blue animal">
                <img src="./assets/animals/lambchop.png" class="u-pull-left">
                <ul>
                    <li>
                        <strong>Name:</strong> Lambchop
                    </li>
                    <li>
                        <strong>Type:</strong> Sheep
                    </li>
                </ul>
            </div>
        </a>
        <a href="#" class="four columns animalLink">
            <div class="blue animal">
                <img src="./assets/animals/lambchop.png" class="u-pull-left">
                <ul>
                    <li>
                        <strong>Name:</strong> Lambchop
                    </li>
                    <li>
                        <strong>Type:</strong> Sheep
                    </li>
                </ul>
            </div>
        </a>
        <a href="#" class="four columns animalLink">
            <div class="blue animal">
                <img src="./assets/animals/lambchop.png" class="u-pull-left">
                <ul>
                    <li>
                        <strong>Name:</strong> Lambchop
                    </li>
                    <li>
                        <strong>Type:</strong> Sheep
                    </li>
                </ul>
            </div>
        </a>
        </div>
    </div>

    <div class="modal" id="farmModal">
        <div class="modal-content">
            <span class="close" id="farmClose">&times;</span>
            <div class="farm-grab">
                <h2>Enter Farm Info</h2>
                <form id="farm-form">
                    <label for="farm-name">Farm Name</label>
                    <input id="farm-name" class="form-input u-full-width" type="text" placeholder="Farm Name" required="true">
                    <p id="farmNameStatus" class="hide">Farm Name must be 3 characters or longer</p>
                    <label for="farm-description">Description of Farm</label>
                    <textarea name="farm-description" id="farm-description" cols="45" placeholder="Farm Description" required="true"></textarea>
                    <p id="farmCreateStatus" class="hide">Farm Description must be 3 characters or longer</p>
                    <button class="button-primary modalBtn" id="farmSubmit">Submit</button>
                </form>
            </div>
        </div>
    </div>


<div class="modal" id="animalModal">
    <div class="modal-content">
        <span class="close" id="animalClose">&times;</span>
            <div class="animal-area">
            <h2>Enter Animal Info</h2>
            <form id="animal-form">
                <label for="animal-name">Animal Name (Optional)</label>
                <input id="animal-name" class="form-input u-full-width" type="text" placeholder="Animal Name" >

                <label for="animal-breed">Animal Breed (Optional)</label>
                <input id="animal-breed" class="form-input u-full-width" type="text" placeholder="Animal Breed">
                
                <label for="animal-product">Animal Product (Optional)</label>
                <input id="animal-product" class="form-input u-full-width" type="text" placeholder="Animal Product">

                <label for="animal-type">Animal Type (Required)</label>
                <input id="animal-type" class="form-input u-full-width" type="text" placeholder="Animal Type" required="true">

                <label for="organic-cost">Organic Cost (Required)</label>
                <input id="organic-cost" class="form-input u-full-width" type="number" placeholder="$$$" required="true">

                <label for="manufactured-cost">Manufactured Cost (Required)</label>
                <input id="manufactured-cost" class="form-input u-full-width" type="number" placeholder="$$$" required="true">

                <button class="button-primary modalBtn" id="animalSubmit">Submit</button>
            </form>
        </div>
    </div>
</div>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="./js/chart.js"></script>
  <script>
    function makeTheChart(animals){ 
    const ctx = document.getElementById('notAnimal').getContext('2d');
let animalcounterORG = {};
let animalcounterManu = {};
animals.forEach(animal => {
    for(let key in animal){
        if(key ==='type'){     
            if(!(animal[key] in animalcounterManu)){
                animalcounterManu[animal[key]] = (animal.food_manufactured *1);
                animalcounterORG[animal[key]] = (animal.food_organic *1);
            }else{
                animalcounterManu[animal[key]] +=(animal.food_manufactured*1);
                animalcounterORG[animal[key]] += (animal.food_organic *1);
            }
        }
    }
});

let titleArray = [];
let manuValues = [];
let orgValues = [];
for(let key in animalcounterORG){
    titleArray.push(key);
    orgValues.push(animalcounterORG[key])
}
for(let key in animalcounterManu){
    manuValues.push(animalcounterManu[key])
}
const animalChart = new Chart(ctx,{
    type: 'bar',
    data: {
        labels: titleArray,
        datasets: 
        [{
            label: 'Organic Food Cost',
            data: orgValues,
            backgroundColor: [
                "rgba(255, 99, 132, 0.2)",
                "rgba(54, 162, 235, 0.2)",
                "rgba(255, 206, 86, 0.2)",
                "rgba(75, 192, 192, 0.2)",
                "rgba(153, 102, 255, 0.2)",
              ]
          },{
            label: 'Manufactured Food Cost',
            data: manuValues,
            backgroundColor: [
                "rgba(153, 102, 255, 0.2)",
                "rgba(255, 99, 132, 0.2)",
                "rgba(54, 162, 235, 0.2)",
                "rgba(255, 206, 86, 0.2)",
                "rgba(75, 192, 192, 0.2)",
                ,
              ]
          }
        ]  
    },
    options:{
        responsive: true,
        maintainAspectRatio: false
    },
})
}
console.log({animals})
console.log({{animals}})
console.log({{{animals}}})
makeTheChart({animals})
  </script>
  <script src="./js/farmModal.js"></script>
</body>

</html>